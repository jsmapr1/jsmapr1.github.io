
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>react animations  | Dev</title>

<meta name="author" content="Joe"> 

<meta name="description" content="Previously, I wrote about React animations for creating a dropdown menu,
but after spending more and more time working with them, I decided to &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Dev" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Dev</a></h1>
<h4>The Art of Working With Code(rs)</h4>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.thejoemorgan.com">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">React Animations</h2>
	<div class="entry-content"><p>Previously, I wrote about React animations for creating a <a href="/blog/2016/01/05/creating-a-dropdown-menu-in-react/">dropdown menu</a>,
but after spending more and more time working with them, I decided to explore exactly how animations fit into the React lifecycle.</p>

<h2>Two Animations</h2>

<p>There are two kinds of component animations in React.</p>

<ol>
<li>The component is already in the DOM</li>
<li>The component is entering the DOM</li>
</ol>


<p>The first kind are not that hard to deal with.
In the past, I&rsquo;ve added a CSS class to trigger a transition.
There are also React specific libraries like <a href="https://github.com/FormidableLabs/radium">radium</a>.</p>

<p>The second kind of component requires a bit more work.</p>

<p>To understand why, consider the React lifecycle.</p>

<h2>React Lifecycle</h2>

<p>In React, you create a series of components that become part of a the virtual DOM:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;PotatoHead&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;head&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;peg&quot;</span><span class="p">:</span> <span class="kc">null</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;topPeg&quot;</span><span class="p">:</span> <span class="s2">&quot;eyes&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="nt">&quot;middlePeg&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>        <span class="nt">&quot;bottomPeg&quot;</span><span class="p">:</span> <span class="kc">null</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;bottom&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;peg&quot;</span><span class="p">:</span> <span class="s2">&quot;shoes&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The virtual DOM renders into the DOM as seen in the browser:</p>

<p><img src="/images/empty.png"></p>

<p>Eventually something happens in the app and that triggers an action:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">dispatch</span><span class="p">(</span><span class="nx">existentialCrisis</span><span class="p">());</span>
</span></code></pre></td></tr></table></div></figure>


<p>This changes the virtual DOM:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;PotatoHead&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;head&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;peg&quot;</span><span class="p">:</span> <span class="kc">null</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;topPeg&quot;</span><span class="p">:</span> <span class="s2">&quot;eyes&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;middlePeg&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;bottomPeg&quot;</span><span class="p">:</span> <span class="s2">&quot;mouth&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;bottom&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;peg&quot;</span><span class="p">:</span> <span class="s2">&quot;shoes&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Which updates the actual DOM:</p>

<p><img src="/images/crisis.png"></p>

<p>The thing that makes React animations difficult is that there is no point in the lifecycle that they fit in.</p>

<p>Think about the lifecycle hooks:</p>

<p><svg width="263px" height="69px" viewBox="250 180 263 69" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <rect id="path-1" x="250" y="180" width="263" height="69" rx="8"></rect>
        <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="263" height="69" fill="white">
            <use xlink:href="#path-1"></use>
        </mask>
    </defs>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-2)" stroke-width="4" fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>
    <text id="componentWillMount" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="288" y="220" fill="#000000">componentWillMount</tspan>
    </text>
</svg><br/>
<svg width="263px" height="69px" viewBox="250 180 263 69" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <rect id="path-1" x="250" y="180" width="263" height="69" rx="8"></rect>
        <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="263" height="69" fill="white">
            <use xlink:href="#path-1"></use>
        </mask>
    </defs>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-2)" stroke-width="4" fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>
    <text id="render" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="353" y="220" fill="#000000">render</tspan>
    </text>
</svg><br/>
<svg width="263px" height="69px" viewBox="250 180 263 69" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <rect id="path-1" x="250" y="180" width="263" height="69" rx="8"></rect>
        <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="263" height="69" fill="white">
            <use xlink:href="#path-1"></use>
        </mask>
    </defs>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-2)" stroke-width="4" fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>
    <text id="componentDidMount" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="289" y="220" fill="#000000">componentDidMount</tspan>
    </text>
</svg></p>

<p>Where are animations supposed to fit in?</p>

<p>You can&rsquo;t use the <code>componentWillMount</code> hook because there is no DOM element to animate.</p>

<p><img src="/images/willMount.png"></p>

<p>And you can&rsquo;t use the <code>componentDidMount</code> hook because the element is already there, so you would have to rerender it (causing a potential loop)
and you may see a jump as the component gets an orientation change after being added to the DOM.</p>

<p><img src="/images/didMount.png"></p>

<h2>Solution: More Lifecycle Hooks</h2>

<p>The React team recognized this problem and created a higher level component called <em>ReactTransitionGroups</em> that can wrap
additional components giving them more lifecycle hooks.</p>

<p><svg width="263px" height="246px" viewBox="250 180 263 246" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <rect id="path-1" x="250" y="180" width="263" height="69" rx="8"></rect>
        <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="263" height="69" fill="white">
            <use xlink:href="#path-1"></use>
        </mask>
        <rect id="path-3" x="250" y="269" width="263" height="69" rx="8"></rect>
        <mask id="mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="263" height="69" fill="white">
            <use xlink:href="#path-3"></use>
        </mask>
        <rect id="path-5" x="250" y="357" width="263" height="69" rx="8"></rect>
        <mask id="mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="263" height="69" fill="white">
            <use xlink:href="#path-5"></use>
        </mask>
    </defs>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-2)" stroke-width="4" fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-4)" stroke-width="4" fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-3"></use>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-6)" stroke-width="4" fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-5"></use>
    <text id="componentWillMount" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="288" y="220" fill="#000000">componentWillMount</tspan>
    </text>
    <text id="render" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="353" y="311" fill="#000000">render</tspan>
    </text>
    <text id="componentDidMount" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="289" y="399" fill="#000000">componentDidMount</tspan>
    </text>
</svg></p>

<p>Any component that is wrapped within a <em>ReactTransitionGroup</em> component will get a couple new lifecycle hooks.
One of the most relevant is <code>componentWillEnter</code> which will be fired as soon as the component is mounted (the same time as componentDidMount).</p>

<p><svg width="351px" height="334px" viewBox="141 61 351 334" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <rect id="path-10" x="141" y="141" width="170" height="52" rx="6"></rect>
        <mask id="mask-20" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="170" height="52" fill="white">
            <use xlink:href="#path-10"></use>
        </mask>
        <rect id="path-30" x="141" y="61" width="226" height="69" rx="8"></rect>
        <mask id="mask-40" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="226" height="69" fill="white">
            <use xlink:href="#path-30"></use>
        </mask>
        <path d="M141,333.999471 C141,329.581485 144.582815,326 149.001933,326 L295.121094,326 L358.998463,326 C363.41759,326 367,329.588481 367,333.999471 L367,387.000529 C367,391.418515 363.427298,395 359.006351,395 L148.993649,395 C144.578879,395 141,391.411519 141,387.000529 L141,333.999471 Z" id="path-50"></path>
        <mask id="mask-60" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="226" height="69" fill="white">
            <use xlink:href="#path-50"></use>
        </mask>
        <rect id="path-70" x="141" y="203" width="170" height="52" rx="6"></rect>
        <mask id="mask-80" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="170" height="52" fill="white">
            <use xlink:href="#path-70"></use>
        </mask>
        <rect id="path-90" x="141" y="264" width="170" height="52" rx="6"></rect>
        <mask id="mask-100" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="170" height="52" fill="white">
            <use xlink:href="#path-90"></use>
        </mask>
        <rect id="path-101" x="322" y="264" width="170" height="52" rx="6"></rect>
        <mask id="mask-102" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="170" height="52" fill="white">
            <use xlink:href="#path-101"></use>
        </mask>
    </defs>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-20)" stroke-width="3" fill="none" xlink:href="#path-10"></use>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-40)" stroke-width="4" fill="none" xlink:href="#path-30"></use>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-60)" stroke-width="4" fill="none" xlink:href="#path-50"></use>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-80)" stroke-width="3" fill="none" xlink:href="#path-70"></use>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-100)" stroke-width="3" fill="none" xlink:href="#path-90"></use>
    <text id="ReactTransitionGroup" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="156" y="103" fill="#000000">ReactTransitionGroup</tspan>
    </text>
    <text id="ReactTransitionGroup" stroke="none" fill="none" font-family="Helvetica" font-size="20" font-weight="normal">
        <tspan x="156" y="368" fill="#000000">ReactTransitionGroup</tspan>
    </text>
    <text id="componentWillMount" stroke="none" fill="none" font-family="Helvetica" font-size="14" font-weight="normal">
        <tspan x="161" y="173" fill="#000000">componentWillMount</tspan>
    </text>
    <text id="componentDidMount" stroke="none" fill="none" font-family="Helvetica" font-size="14" font-weight="normal">
        <tspan x="161" y="296" fill="#000000">componentDidMount</tspan>
    </text>
    <use id="Rectangle" stroke="#000000" mask="url(#mask-102)" stroke-width="3" fill="none" xlink:href="#path-101"></use>
    <text id="componentWillEnter" stroke="none" fill="none" font-family="Helvetica" font-size="14" font-weight="normal">
        <tspan x="342" y="296" fill="#000000">componentWillEnter</tspan>
    </text>
    <text id="render" stroke="none" fill="none" font-family="Helvetica" font-size="14" font-weight="normal">
        <tspan x="206" y="235" fill="#000000">render</tspan>
    </text>
</svg></p>

<p><code>componentWillEnter</code> creates a lifecycle hook that we can use to animate an components we want.
All other animations will be blocked until a callback is called.</p>

<p>Chang Wang has an excellent example of how to build an animation with Tween using <a href="https://medium.com/@cheapsteak/animations-with-reacttransitiongroup-4972ad7da286#.6r1fat121">ReactTransitionGroups</a>.
If you need fine grained control or want to use a specific library, than <code>ReactTransitionGroups</code> are the way to go.</p>

<p>If you need something even easier, React made a further abstraction called <code>ReactCSSTransitionGroups</code> that <a href="https://github.com/facebook/react/blob/master/src/addons/transitions/ReactCSSTransitionGroupChild.js">utilize transition</a> groups but allow the developer to use CSS transitions to handle any animations.</p>

<h2>ReactCSSTransitionGroups</h2>

<p><code>ReactCSSTransitionGroups</code> work by wrapping components and then adding specific classes to child components for a designated amount of time.</p>

<p>Here&rsquo;s an example of how you would set it up:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">ShapeContainer</span> <span class="o">=</span> <span class="p">({</span><span class="nx">elements</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;shapes&quot;</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nx">ReactCSSTransitionGroup</span>
</span><span class='line'>      <span class="nx">transitionName</span> <span class="o">=</span> <span class="s2">&quot;shape&quot;</span>
</span><span class='line'>      <span class="nx">transitionEnterTimeout</span><span class="o">=</span><span class="p">{</span><span class="mi">2000</span><span class="p">}</span>
</span><span class='line'>      <span class="nx">transitionLeaveTimeout</span><span class="o">=</span><span class="p">{</span><span class="mi">2000</span><span class="p">}</span>
</span><span class='line'>     <span class="o">&gt;</span>
</span><span class='line'>      <span class="p">{</span><span class="nx">elements</span><span class="p">}</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="err">/ReactCSSTransitionGroup&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice a few things.
I gave the transition name of shape and a transition enter timeout of 2000 milliseconds and the same for the transition leave.</p>

<p>This means that a few classes with the base name <em>shape</em> will be added to every child component for 2 seconds before they are automatically removed.</p>

<p>To take advantage of any transitions, we need to define them with CSS:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.shape-enter</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">:</span> <span class="n">scale</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.shape-enter.shape-enter-active</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">:</span> <span class="n">scale</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span><span class='line'>  <span class="n">transition</span><span class="o">:</span> <span class="n">all</span> <span class="m">2s</span> <span class="n">ease</span><span class="o">-</span><span class="n">in</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Rendered code will look like this.
The <code>span</code> tag is the <code>ReactCSSTransitionGroup</code> (although you can specify other tags like <code>div</code> or <code>ul</code>).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Any child componenent that is added will receive that <code>shape-enter</code> class.
This sets up the initial styling that will be animated (in this example it is effectively hidden).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;svg</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span>
</span><span class='line'>           <span class="na">class=</span><span class="s">&quot;shape-enter&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;circle</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span><span class="nt">&gt;&lt;/circle&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/svg&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the next tick, the component will receive the <code>shape-enter-active</code> class which will trigger the CSS transition.
In this example, it will scale it up to full size.
The timing for the transition should match the timeout on CSS transition group.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;svg</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span>
</span><span class='line'>           <span class="na">class=</span><span class="s">&quot;shape-enter shape-enter-active&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;circle</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span><span class="nt">&gt;&lt;/circle&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/svg&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>After the timeout is reached, the classes are removed from the component.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;svg</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span>
</span><span class='line'>           <span class="na">class=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;circle</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span><span class="nt">&gt;&lt;/circle&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/svg&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Any subsequent children will go through the same process.</p>

<p>Animating a component leaving is even more important.
Without transition groups, a component will disappear before anything can happen to it.
However, with <code>ReactCSSTransitionGroups</code> the whole process happens in reverse.</p>

<p>Let&rsquo;s start with the leaving css.
We&rsquo;ll start at full size and shrink to nothing.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.shape-leave</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">:</span> <span class="n">scale</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.shape-leave.shape-leave-active</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">:</span> <span class="n">scale</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span class='line'>  <span class="n">transition</span><span class="o">:</span> <span class="n">all</span> <span class="m">2s</span> <span class="n">ease</span><span class="o">-</span><span class="n">in</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>A component in the DOM will first receive the <code>shape-leave</code> class:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;svg</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span>
</span><span class='line'>           <span class="na">class=</span><span class="s">&quot;shape-leave&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;circle</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span><span class="nt">&gt;&lt;/circle&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/svg&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>After that, it will receive the <code>shape-leave-active</code> class:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;svg</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span>
</span><span class='line'>           <span class="na">class=</span><span class="s">&quot;shape-leave shape-leave-active&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;circle</span> <span class="na">data-reactid=</span><span class="s">&quot;.0.2&quot;</span><span class="nt">&gt;&lt;/circle&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/svg&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And when the timeout set on the <code>ReactCSSTransitionGroup</code> component is reached, the element is removed.
Note: The element is not removed after the animation is complete, but when the timeout is reached.
So if the CSS transition is longer than the timeout it will just disappear.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;shapes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;0.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that&rsquo;s all it takes.</p>

<p>Here&rsquo;s a full demo you can try:</p>

<p data-height="450" data-theme-id="0" data-slug-hash="KgdNWy" data-default-tab="js,result" data-user="jsmapr1" data-embed-version="2" class="codepen">See the Pen <a href="http://codepen.io/jsmapr1/pen/KgdNWy/">ReactCSSTransitionGroup</a> by Joe Morgan (<a href="http://codepen.io/jsmapr1">@jsmapr1</a>) on <a href="http://codepen.io">CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-09-23T08:15:14-05:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/javascript/'>javascript</a>, <a class='category' href='/blog/categories/react/'>react</a>

</div>


	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2017

    Joe

<br>
Powered by Octopress.
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-84697313-1');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



</body>
</html>
